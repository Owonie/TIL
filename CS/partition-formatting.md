# 파티셔닝과 포매팅

참조 자료

- https://www.youtube.com/watch?v=C-IYRzC-GW8

파일을 효율적으로 관리하고 유지 할 수 있는 방법을 일컫는다.

## 파티셔닝과 포매팅

파티셔닝은 저장 장치의 논리적인 영역을 구획하는 작업이다. 목적에 따라서 저장공간을 분할해주면 보조기억장치의 사용과 관리가 편해진다. 하나의 분할 공간은 파티션이라고 부른다.

포매팅은 어떤 방식으로 파일을 관리할지 결정하고 새로운 데이터를 쓸 수 있도록 준비하는 작업이다. 일반적으로 포매팅은 논리적 포매팅을 가르킨다. 포매팅을 통해 파티션 마다 서로 다른 파일 시스템을 사용할 수 있도록 할 수도 있다.

파티셔닝과 포메팅 작업을 모두 끝낸다면 파일과 디렉터리 생성이 가능해진다.

## 파일 할당 방법

하나의 파일이 보조기억장치에 저장될 때에는 여러 블록에 걸쳐 저장된다. 이는 운영체제가 파일 또는 디렉터리를 블록 단위로 RW작업을 수행하기 때문이다.

파일의 할당은 연속 할당과 불연속 할당이 있으며, 불연속 할당은 또 연결할당과 색인할당으로 나눌 수 있다.

### 연속 할당

보조기억장치 내부에서 메모리를 연속적인 블록에 파일을 할당하는 방법이다. 특정 메모리에 접근하기위해 첫 번째 블록 주소와 블록 단위의 길이만 알면된다. 그래서 디렉터리 엔트리는 파일의 이름, 첫 번째 블록 주소, 블록 단위 길이가 명시되어있다. 디렉토리 엔트리는 이름에서도 알 수 있듯 파일과 관련있는 정보를 담고 있는 특별한 테이블이다.

연속 할당은 페이징기법에서 과 같이 내부 단편화가 일어날 수 있다.

### 불연속 할당

#### 불연속-연결

불연속-연결 할당의 동작 메커니즘은 연결리스트와 흡사하다. 각 블록의 일부에 다음 블록의 주소를 저장하여 각 블록이 다음 블록을 가리키는 형태로 할당작업을 진행한다. 파일이 여러 블록에 흩어져 저장되어도 상관이 없는 것이 불연속 할당의 특징이다.

불연속 할당의 디렉터리 엔트리는 파일 이름, 첫번째 블록 주소, 블록 단위의 길이다. 연속 할당과 다른 점은 없으나 서로 연결되어있어서 메모리의 RW작업을 수행할 때 모든 연관된 블록을 방문할 수 있다. 그렇기에 연결리스트의 단점인 중간 지점에서 에러가 발생한다면 그 후의 모든 블록에 접근을 할 수 없다는 단점을 갖고있다.

#### 불연속-색인

하나의 블록에서 (색인 블록) 모든 파일 블록의 주소를 관리하는 불연속 할당 방식이다. 연결리스트의 단점을 보완할 수 있다.

## 파일 시스템 종류

### FAT 파일 시스템

연결 할당 기반의 파일 시스템이나 연결 할당의 단점을 보완한 방법이다. 각 블록에 포함된 다음 블록 주소를 하나의 테이블로서 관리하는 방식이다. 여기서 테이블은 File Allocation Table이라고 부른다. usb나 sd카드에 저장장치 시스템으로 많이 사용된다고 한다.

### 유닉스 파일 시스템

블록 주소의 첫 번째 12개에는 직접 블록 주소를 저장하고, 13번째 주소부터는 단일 간접 블록 주소를 저장한다. 여기서 단일 간접 블록 주소는 저장되지 않은 남은 데이터 블록 주소를 모두 저장한다.
즉 나머지 데이터들의 주소를 하나의 블록에 저장해준다.

만약 단일 간접 블록 주소로도 메모리 할당을 위한 공간이 부족하다면 14번째 블록에 이중 간접 블록 주소를 저장하고, 그래도 부족하다면 15번째 주소에 삼중 간접 블록 주소로 저장한다. 이는 트리 구조와 매우 흡사한 구조 양식을 띈다.
